<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 1000" style="background: #f8f9fa;">
  <defs>
    <style>
      .title { font: bold 24px Arial; fill: #2c3e50; text-anchor: middle; }
      .subtitle { font: bold 16px Arial; fill: #34495e; text-anchor: middle; }
      .component { font: 12px Arial; fill: #2c3e50; }
      .tech-stack { font: 10px Arial; fill: #7f8c8d; }
      .layer-title { font: bold 14px Arial; fill: #fff; text-anchor: middle; }
      .flow-text { font: 10px Arial; fill: #e74c3c; text-anchor: middle; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#e74c3c" />
    </marker>
    <linearGradient id="webGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#3498db;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2980b9;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="appGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#27ae60;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#229954;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="dataGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#e67e22;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#d68910;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="infraGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#8e44ad;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#7d3c98;stop-opacity:1" />
    </linearGradient>
  </defs>

  <!-- Title -->
  <text x="700" y="30" class="title">Aegis Cloud Scanner - Complete System Architecture</text>
  <text x="700" y="55" class="subtitle">Multi-Cloud Security Assessment Platform</text>

  <!-- Presentation Layer -->
  <rect x="50" y="80" width="1300" height="160" fill="url(#webGrad)" rx="10" stroke="#2c3e50" stroke-width="2"/>
  <text x="700" y="100" class="layer-title">PRESENTATION LAYER</text>

  <!-- Landing Page -->
  <rect x="70" y="120" width="180" height="100" fill="#ecf0f1" rx="5" stroke="#34495e" stroke-width="1"/>
  <text x="160" y="140" class="component" text-anchor="middle">Landing Page</text>
  <text x="160" y="155" class="tech-stack" text-anchor="middle">HTML5, CSS3, JavaScript</text>
  <text x="80" y="175" class="tech-stack">• Aegis Basic Button</text>
  <text x="80" y="190" class="tech-stack">• Aegis Advanced Button</text>
  <text x="80" y="205" class="tech-stack">• Static Assets</text>

  <!-- Web Dashboard -->
  <rect x="270" y="120" width="220" height="100" fill="#ecf0f1" rx="5" stroke="#34495e" stroke-width="1"/>
  <text x="380" y="140" class="component" text-anchor="middle">Web Dashboard</text>
  <text x="380" y="155" class="tech-stack" text-anchor="middle">Jinja2 Templates, Bootstrap 5</text>
  <text x="280" y="175" class="tech-stack">• Real-time Scanning UI</text>
  <text x="280" y="190" class="tech-stack">• Resource Topology</text>
  <text x="280" y="205" class="tech-stack">• Security Posture</text>

  <!-- Reports Interface -->
  <rect x="510" y="120" width="180" height="100" fill="#ecf0f1" rx="5" stroke="#34495e" stroke-width="1"/>
  <text x="600" y="140" class="component" text-anchor="middle">Reports Interface</text>
  <text x="600" y="155" class="tech-stack" text-anchor="middle">Chart.js, D3.js</text>
  <text x="520" y="175" class="tech-stack">• Executive Reports</text>
  <text x="520" y="190" class="tech-stack">• Technical Analysis</text>
  <text x="520" y="205" class="tech-stack">• Compliance Reports</text>

  <!-- Settings &amp; Admin -->
  <rect x="710" y="120" width="180" height="100" fill="#ecf0f1" rx="5" stroke="#34495e" stroke-width="1"/>
  <text x="800" y="140" class="component" text-anchor="middle">Settings &amp; Admin</text>
  <text x="800" y="155" class="tech-stack" text-anchor="middle">CRUD Operations</text>
  <text x="720" y="175" class="tech-stack">• User Management</text>
  <text x="720" y="190" class="tech-stack">• Credential Config</text>
  <text x="720" y="205" class="tech-stack">• Automation Rules</text>

  <!-- Health Check -->
  <rect x="910" y="120" width="160" height="100" fill="#ecf0f1" rx="5" stroke="#34495e" stroke-width="1"/>
  <text x="990" y="140" class="component" text-anchor="middle">Health Check</text>
  <text x="990" y="155" class="tech-stack" text-anchor="middle">Real-time Status</text>
  <text x="920" y="175" class="tech-stack">• Database Status</text>
  <text x="920" y="190" class="tech-stack">• Scanner Health</text>
  <text x="920" y="205" class="tech-stack">• API Endpoints</text>

  <!-- Authentication -->
  <rect x="1090" y="120" width="160" height="100" fill="#ecf0f1" rx="5" stroke="#34495e" stroke-width="1"/>
  <text x="1170" y="140" class="component" text-anchor="middle">Authentication</text>
  <text x="1170" y="155" class="tech-stack" text-anchor="middle">2FA, Session Mgmt</text>
  <text x="1100" y="175" class="tech-stack">• Login/Register</text>
  <text x="1100" y="190" class="tech-stack">• 2FA Setup</text>
  <text x="1100" y="205" class="tech-stack">• Password Recovery</text>

  <!-- Application Layer -->
  <rect x="50" y="260" width="1300" height="200" fill="url(#appGrad)" rx="10" stroke="#2c3e50" stroke-width="2"/>
  <text x="700" y="280" class="layer-title">APPLICATION LAYER</text>

  <!-- Flask Core -->
  <rect x="70" y="300" width="200" height="140" fill="#ecf0f1" rx="5" stroke="#34495e" stroke-width="1"/>
  <text x="170" y="320" class="component" text-anchor="middle">Flask Application Core</text>
  <text x="170" y="335" class="tech-stack" text-anchor="middle">app.py (362KB)</text>
  <text x="80" y="355" class="tech-stack">• Route Handlers</text>
  <text x="80" y="370" class="tech-stack">• API Endpoints</text>
  <text x="80" y="385" class="tech-stack">• SSE Streaming</text>
  <text x="80" y="400" class="tech-stack">• Rate Limiting</text>
  <text x="80" y="415" class="tech-stack">• CSRF Protection</text>

  <!-- Security Manager -->
  <rect x="290" y="300" width="160" height="140" fill="#ecf0f1" rx="5" stroke="#34495e" stroke-width="1"/>
  <text x="370" y="320" class="component" text-anchor="middle">Security Manager</text>
  <text x="370" y="335" class="tech-stack" text-anchor="middle">Multi-layer Security</text>
  <text x="300" y="355" class="tech-stack">• Secrets Manager</text>
  <text x="300" y="370" class="tech-stack">• Crypto Manager</text>
  <text x="300" y="385" class="tech-stack">• Key Manager</text>
  <text x="300" y="400" class="tech-stack">• Input Validators</text>
  <text x="300" y="415" class="tech-stack">• Error Handlers</text>

  <!-- Scanner Engine -->
  <rect x="470" y="300" width="200" height="140" fill="#ecf0f1" rx="5" stroke="#34495e" stroke-width="1"/>
  <text x="570" y="320" class="component" text-anchor="middle">Scanner Engine</text>
  <text x="570" y="335" class="tech-stack" text-anchor="middle">Parallel Processing</text>
  <text x="480" y="355" class="tech-stack">• AWS Scanner</text>
  <text x="480" y="370" class="tech-stack">• Azure Scanner</text>
  <text x="480" y="385" class="tech-stack">• GCP Scanner</text>
  <text x="480" y="400" class="tech-stack">• Parallel Scanner</text>
  <text x="480" y="415" class="tech-stack">• Progress Tracking</text>

  <!-- Report Generator -->
  <rect x="690" y="300" width="180" height="140" fill="#ecf0f1" rx="5" stroke="#34495e" stroke-width="1"/>
  <text x="780" y="320" class="component" text-anchor="middle">Report Generator</text>
  <text x="780" y="335" class="tech-stack" text-anchor="middle">Multiple Formats</text>
  <text x="700" y="355" class="tech-stack">• PDF Generation</text>
  <text x="700" y="370" class="tech-stack">• CSV Export</text>
  <text x="700" y="385" class="tech-stack">• JSON API</text>
  <text x="700" y="400" class="tech-stack">• Custom Templates</text>
  <text x="700" y="415" class="tech-stack">• Email Reports</text>

  <!-- AI Integration -->
  <rect x="890" y="300" width="160" height="140" fill="#ecf0f1" rx="5" stroke="#34495e" stroke-width="1"/>
  <text x="970" y="320" class="component" text-anchor="middle">AI Integration</text>
  <text x="970" y="335" class="tech-stack" text-anchor="middle">Google Gemini API</text>
  <text x="900" y="355" class="tech-stack">• Risk Analysis</text>
  <text x="900" y="370" class="tech-stack">• Remediation</text>
  <text x="900" y="385" class="tech-stack">• Pattern Detection</text>
  <text x="900" y="400" class="tech-stack">• Smart Insights</text>
  <text x="900" y="415" class="tech-stack">• Auto-suggestions</text>

  <!-- Logging System -->
  <rect x="1070" y="300" width="180" height="140" fill="#ecf0f1" rx="5" stroke="#34495e" stroke-width="1"/>
  <text x="1160" y="320" class="component" text-anchor="middle">Logging System</text>
  <text x="1160" y="335" class="tech-stack" text-anchor="middle">aegis_logger.py</text>
  <text x="1080" y="355" class="tech-stack">• Structured Logging</text>
  <text x="1080" y="370" class="tech-stack">• Security Events</text>
  <text x="1080" y="385" class="tech-stack">• Audit Trail</text>
  <text x="1080" y="400" class="tech-stack">• Performance Metrics</text>
  <text x="1080" y="415" class="tech-stack">• Error Tracking</text>

  <!-- Data Layer -->
  <rect x="50" y="480" width="1300" height="160" fill="url(#dataGrad)" rx="10" stroke="#2c3e50" stroke-width="2"/>
  <text x="700" y="500" class="layer-title">DATA LAYER</text>

  <!-- Database -->
  <rect x="70" y="520" width="200" height="100" fill="#ecf0f1" rx="5" stroke="#34495e" stroke-width="1"/>
  <text x="170" y="540" class="component" text-anchor="middle">SQLite Database</text>
  <text x="170" y="555" class="tech-stack" text-anchor="middle">SQLAlchemy ORM</text>
  <text x="80" y="575" class="tech-stack">• Users &amp; API Keys</text>
  <text x="80" y="590" class="tech-stack">• Scan Results</text>
  <text x="80" y="605" class="tech-stack">• Cloud Credentials</text>

  <!-- Cache Layer -->
  <rect x="290" y="520" width="160" height="100" fill="#ecf0f1" rx="5" stroke="#34495e" stroke-width="1"/>
  <text x="370" y="540" class="component" text-anchor="middle">Cache System</text>
  <text x="370" y="555" class="tech-stack" text-anchor="middle">cache.py</text>
  <text x="300" y="575" class="tech-stack">• Session Cache</text>
  <text x="300" y="590" class="tech-stack">• Scan Results</text>
  <text x="300" y="605" class="tech-stack">• Performance</text>

  <!-- File Storage -->
  <rect x="470" y="520" width="180" height="100" fill="#ecf0f1" rx="5" stroke="#34495e" stroke-width="1"/>
  <text x="560" y="540" class="component" text-anchor="middle">File Storage</text>
  <text x="560" y="555" class="tech-stack" text-anchor="middle">Local Filesystem</text>
  <text x="480" y="575" class="tech-stack">• Report Files</text>
  <text x="480" y="590" class="tech-stack">• Static Assets</text>
  <text x="480" y="605" class="tech-stack">• Log Files</text>

  <!-- Configuration -->
  <rect x="670" y="520" width="180" height="100" fill="#ecf0f1" rx="5" stroke="#34495e" stroke-width="1"/>
  <text x="760" y="540" class="component" text-anchor="middle">Configuration</text>
  <text x="760" y="555" class="tech-stack" text-anchor="middle">.env &amp; JSON Files</text>
  <text x="680" y="575" class="tech-stack">• Environment Vars</text>
  <text x="680" y="590" class="tech-stack">• API Keys</text>
  <text x="680" y="605" class="tech-stack">• Settings</text>

  <!-- Migration Support -->
  <rect x="870" y="520" width="200" height="100" fill="#ecf0f1" rx="5" stroke="#34495e" stroke-width="1"/>
  <text x="970" y="540" class="component" text-anchor="middle">Migration Support</text>
  <text x="970" y="555" class="tech-stack" text-anchor="middle">migrate_to_postgresql.py</text>
  <text x="880" y="575" class="tech-stack">• SQLite → PostgreSQL</text>
  <text x="880" y="590" class="tech-stack">• Data Backup</text>
  <text x="880" y="605" class="tech-stack">• Verification</text>

  <!-- Scheduler -->
  <rect x="1090" y="520" width="160" height="100" fill="#ecf0f1" rx="5" stroke="#34495e" stroke-width="1"/>
  <text x="1170" y="540" class="component" text-anchor="middle">Task Scheduler</text>
  <text x="1170" y="555" class="tech-stack" text-anchor="middle">APScheduler</text>
  <text x="1100" y="575" class="tech-stack">• Cron Jobs</text>
  <text x="1100" y="590" class="tech-stack">• Auto Scans</text>
  <text x="1100" y="605" class="tech-stack">• Reports</text>

  <!-- Infrastructure Layer -->
  <rect x="50" y="660" width="1300" height="160" fill="url(#infraGrad)" rx="10" stroke="#2c3e50" stroke-width="2"/>
  <text x="700" y="680" class="layer-title">INFRASTRUCTURE LAYER</text>

  <!-- Nginx -->
  <rect x="70" y="700" width="180" height="100" fill="#ecf0f1" rx="5" stroke="#34495e" stroke-width="1"/>
  <text x="160" y="720" class="component" text-anchor="middle">Nginx Web Server</text>
  <text x="160" y="735" class="tech-stack" text-anchor="middle">Reverse Proxy</text>
  <text x="80" y="755" class="tech-stack">• SSL Termination</text>
  <text x="80" y="770" class="tech-stack">• Load Balancing</text>
  <text x="80" y="785" class="tech-stack">• Static Files</text>

  <!-- Gunicorn -->
  <rect x="270" y="700" width="160" height="100" fill="#ecf0f1" rx="5" stroke="#34495e" stroke-width="1"/>
  <text x="350" y="720" class="component" text-anchor="middle">Gunicorn WSGI</text>
  <text x="350" y="735" class="tech-stack" text-anchor="middle">Application Server</text>
  <text x="280" y="755" class="tech-stack">• Multi-workers</text>
  <text x="280" y="770" class="tech-stack">• Process Mgmt</text>
  <text x="280" y="785" class="tech-stack">• Socket Comm</text>

  <!-- AWS Lightsail -->
  <rect x="450" y="700" width="180" height="100" fill="#ecf0f1" rx="5" stroke="#34495e" stroke-width="1"/>
  <text x="540" y="720" class="component" text-anchor="middle">AWS Lightsail</text>
  <text x="540" y="735" class="tech-stack" text-anchor="middle">Ubuntu 22.04 LTS</text>
  <text x="460" y="755" class="tech-stack">• IP: 52.66.204.123</text>
  <text x="460" y="770" class="tech-stack">• Domain: aegis-scanner.ink</text>
  <text x="460" y="785" class="tech-stack">• SSL: Let's Encrypt</text>

  <!-- Cloud APIs -->
  <rect x="650" y="700" width="200" height="100" fill="#ecf0f1" rx="5" stroke="#34495e" stroke-width="1"/>
  <text x="750" y="720" class="component" text-anchor="middle">Cloud Provider APIs</text>
  <text x="750" y="735" class="tech-stack" text-anchor="middle">SDK Integration</text>
  <text x="660" y="755" class="tech-stack">• AWS SDK (boto3)</text>
  <text x="660" y="770" class="tech-stack">• Azure SDK</text>
  <text x="660" y="785" class="tech-stack">• GCP SDK</text>

  <!-- Email Service -->
  <rect x="870" y="700" width="160" height="100" fill="#ecf0f1" rx="5" stroke="#34495e" stroke-width="1"/>
  <text x="950" y="720" class="component" text-anchor="middle">Email Service</text>
  <text x="950" y="735" class="tech-stack" text-anchor="middle">SMTP Integration</text>
  <text x="880" y="755" class="tech-stack">• Gmail SMTP</text>
  <text x="880" y="770" class="tech-stack">• Report Delivery</text>
  <text x="880" y="785" class="tech-stack">• Notifications</text>

  <!-- Monitoring -->
  <rect x="1050" y="700" width="180" height="100" fill="#ecf0f1" rx="5" stroke="#34495e" stroke-width="1"/>
  <text x="1140" y="720" class="component" text-anchor="middle">Monitoring &amp; Logs</text>
  <text x="1140" y="735" class="tech-stack" text-anchor="middle">SystemD Services</text>
  <text x="1060" y="755" class="tech-stack">• Service Health</text>
  <text x="1060" y="770" class="tech-stack">• Log Rotation</text>
  <text x="1060" y="785" class="tech-stack">• Performance</text>

  <!-- External Services -->
  <rect x="50" y="840" width="1300" height="120" fill="#f8f9fa" rx="10" stroke="#2c3e50" stroke-width="2"/>
  <text x="700" y="860" class="layer-title" style="fill: #2c3e50;">EXTERNAL INTEGRATIONS</text>

  <!-- Cloud Providers -->
  <rect x="70" y="880" width="250" height="60" fill="#ff9999" rx="5" stroke="#e74c3c" stroke-width="1"/>
  <text x="195" y="900" class="component" text-anchor="middle" style="fill: #fff;">Cloud Providers</text>
  <text x="90" y="920" class="tech-stack" style="fill: #fff;">AWS • Azure • Google Cloud</text>
  <text x="90" y="935" class="tech-stack" style="fill: #fff;">Resource APIs • IAM • Billing</text>

  <!-- AI Services -->
  <rect x="340" y="880" width="200" height="60" fill="#99ff99" rx="5" stroke="#27ae60" stroke-width="1"/>
  <text x="440" y="900" class="component" text-anchor="middle" style="fill: #2c3e50;">AI Services</text>
  <text x="350" y="920" class="tech-stack">Google Gemini API</text>
  <text x="350" y="935" class="tech-stack">Risk Analysis • Insights</text>

  <!-- DNS &amp; CDN -->
  <rect x="560" y="880" width="180" height="60" fill="#9999ff" rx="5" stroke="#3498db" stroke-width="1"/>
  <text x="650" y="900" class="component" text-anchor="middle" style="fill: #fff;">DNS &amp; Domain</text>
  <text x="570" y="920" class="tech-stack" style="fill: #fff;">Namecheap DNS</text>
  <text x="570" y="935" class="tech-stack" style="fill: #fff;">Let's Encrypt SSL</text>

  <!-- Third Party APIs -->
  <rect x="760" y="880" width="200" height="60" fill="#ffcc99" rx="5" stroke="#e67e22" stroke-width="1"/>
  <text x="860" y="900" class="component" text-anchor="middle" style="fill: #2c3e50;">Third Party APIs</text>
  <text x="770" y="920" class="tech-stack">ServiceNow Integration</text>
  <text x="770" y="935" class="tech-stack">SMTP Email Services</text>

  <!-- Compliance -->
  <rect x="980" y="880" width="200" height="60" fill="#cc99ff" rx="5" stroke="#9b59b6" stroke-width="1"/>
  <text x="1080" y="900" class="component" text-anchor="middle" style="fill: #fff;">Compliance</text>
  <text x="990" y="920" class="tech-stack" style="fill: #fff;">SOC2 • PCI DSS • GDPR</text>
  <text x="990" y="935" class="tech-stack" style="fill: #fff;">NIST • CIS Benchmarks</text>

  <!-- Data Flow Arrows -->
  <!-- User to Landing Page -->
  <line x1="160" y1="240" x2="160" y2="300" stroke="#e74c3c" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="170" y="270" class="flow-text">User Access</text>

  <!-- Landing to Dashboard -->
  <line x1="250" y1="170" x2="270" y2="170" stroke="#e74c3c" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="260" y="160" class="flow-text">Navigate</text>

  <!-- Dashboard to Scanner -->
  <line x1="490" y1="170" x2="570" y2="300" stroke="#e74c3c" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="530" y="235" class="flow-text">Scan Request</text>

  <!-- Scanner to Cloud APIs -->
  <line x1="570" y1="440" x2="750" y2="700" stroke="#e74c3c" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="660" y="570" class="flow-text">API Calls</text>

  <!-- Scanner to Database -->
  <line x1="470" y1="370" x2="270" y2="520" stroke="#e74c3c" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="360" y="445" class="flow-text">Store Results</text>

  <!-- Reports to File Storage -->
  <line x1="780" y1="440" x2="560" y2="520" stroke="#e74c3c" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="670" y="480" class="flow-text">Save Reports</text>
</svg>